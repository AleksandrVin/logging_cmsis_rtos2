# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º STM32 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º QEMU —ç–º—É–ª—è—Ç–æ—Ä–∞ –∏ Docker

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–°—Ç–∞—Ç—å—è –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤. –í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ([GitHub](https://github.com/AleksandrVin/logging_cmsis_rtos2), [Habr](https://habr.com/ru/articles/814745/)), –Ω–æ –æ–ø–∏—Å–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –ø—Ä–∏–º–µ–Ω–∏–º –∫ –ª—é–±—ã–º –ø—Ä–æ–µ–∫—Ç–∞–º –Ω–∞ –±–∞–∑–µ STM32.

## –í–≤–µ–¥–µ–Ω–∏–µ

–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —É–∑–∫–∏–º –º–µ—Å—Ç–æ–º –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤–∫–ª—é—á–∞—é—Ç:

- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∂–µ–ª–µ–∑–∞:** –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∏–º–µ—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏ CI-—Å–µ—Ä–≤–µ—Ä–∞
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:** –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∫ CI-—Å–∏—Å—Ç–µ–º–∞–º —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤:** –¢–µ—Å—Ç—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏ –º–æ–≥—É—Ç –¥–∞–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑-–∑–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–¥—Ö–æ–¥ –∫ —Ä–µ—à–µ–Ω–∏—é —ç—Ç–∏—Ö –ø—Ä–æ–±–ª–µ–º —Å –ø–æ–º–æ—â—å—é —ç–º—É–ª—è—Ç–æ—Ä–∞ QEMU –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Docker. –í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –≤–æ–∑—å–º–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è STM32, –Ω–æ –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø—Ä–∏–º–µ–Ω–∏–º—ã –∫ –ª—é–±—ã–º –ø—Ä–æ–µ–∫—Ç–∞–º –Ω–∞ –±–∞–∑–µ —ç—Ç–æ–≥–æ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞. –û—Å–æ–±–µ–Ω–Ω–æ —ç—Ç–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

–í –æ–ø–∏—Å—ã–≤–∞–µ–º–æ–º –ø–æ–¥—Ö–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω—É–∂–¥—ã –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

### –ß—Ç–æ –≤—ã —É–∑–Ω–∞–µ—Ç–µ –∏–∑ —Å—Ç–∞—Ç—å–∏

1. [–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ä–µ–¥—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#—Å–∏—Å—Ç–µ–º–∞-—Å–±–æ—Ä–∫–∏-–≤-docker-–∏-—ç–º—É–ª—è—Ç–æ—Ä-qemu) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker –∏ QEMU
2. [–ö–∞–∫ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç](#—Ç–µ—Å—Ç–æ–≤—ã–π-–ø—Ä–æ–µ–∫—Ç) –Ω–∞ –±–∞–∑–µ STM32CubeMX
3. [–ö–∞–∫ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) STM32 –ø—Ä–æ–µ–∫—Ç–æ–≤
4. [–ö–∞–∫ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ](#–æ—Ç–ª–∞–¥–∫–∞-—Å-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º-gdb-–∏-vs-code) –≤ —ç–º—É–ª—è—Ç–æ—Ä–µ

## –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏ –≤ Docker –∏ —ç–º—É–ª—è—Ç–æ—Ä QEMU

### –ü–æ—á–µ–º—É Docker?

–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º –º—ã —á–∞—Å—Ç–æ —Å—Ç–∞–ª–∫–∏–≤–∞–µ–º—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π "—É –º–µ–Ω—è —Ä–∞–±–æ—Ç–∞–µ—Ç". –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ —Ä–∞–∑–ª–∏—á–∏–π –≤:

- –í–µ—Ä—Å–∏—è—Ö –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

Docker —Ä–µ—à–∞–µ—Ç —ç—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ä–µ–¥—É —Å —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

1. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫—Ä–æ—Å—Å-–∫–æ–º–ø–∏–ª—è—Ü–∏–∏** ([Dockerfile.tests](https://github.com/AleksandrVin/logging_cmsis_rtos2/blob/main/test/Dockerfile.tests))
   - –°–æ–¥–µ—Ä–∂–∏—Ç ARM GCC toolchain, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π –Ω–∞–ø—Ä—è–º—É—é —Å developer.arm.com
   - –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ arm-none-eabi-gcc
   - –í–∫–ª—é—á–∞–µ—Ç make –∏ –¥—Ä—É–≥–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–±–æ—Ä–∫–∏

2. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å QEMU** ([Dockerfile.qemu_stm32](https://github.com/AleksandrVin/logging_cmsis_rtos2/blob/main/test/Dockerfile.qemu_stm32))
   - –°–æ–±–∏—Ä–∞–µ—Ç QEMU –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ [beckus/qemu_stm32](https://github.com/beckus/qemu_stm32)
   - –ö–æ–º–ø–∏–ª—è—Ü–∏—è QEMU –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π —Å–±–æ—Ä–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
   - –≠–º—É–ª–∏—Ä—É–µ—Ç –ø–µ—Ä–∏—Ñ–µ—Ä–∏—é –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

    > ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –≤–µ—Ä—Å–∏—è QEMU —è–≤–ª—è–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä—ã–µ –º–æ–¥–µ–ª–∏ STM32. –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —ç–º—É–ª—è—Ç–æ—Ä–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ STM32. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º –¥–ª—è —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

3. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤** ([Dockerfile.run_tests](https://github.com/AleksandrVin/logging_cmsis_rtos2/blob/main/test/Dockerfile.run_tests))
   - –û–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã –∏ —Å–æ–±–∏—Ä–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç—ã –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

### QEMU –¥–ª—è STM32

QEMU - —ç—Ç–æ –º–æ—â–Ω—ã–π —ç–º—É–ª—è—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤. –î–ª—è —Ä–∞–±–æ—Ç—ã —Å STM32 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è QEMU, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏ STM32.

#### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –ø–µ—Ä–∏—Ñ–µ—Ä–∏—è

–ù–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å—Ç–∞—Ç—å–∏ –¥–ª—è STM32F103C8 –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è:

- UART
- –¢–∞–π–º–µ—Ä—ã
- GPIO
- –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
- –ë–∞–∑–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

> üí° **–°–æ–≤–µ—Ç:** –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ QEMU, —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –¥—Ä—É–≥–∏–µ —ç–º—É–ª—è—Ç–æ—Ä—ã –∏–ª–∏ –±–æ–ª–µ–µ –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ QEMU –ø–æ –º–µ—Ä–µ –∏—Ö –ø–æ—è–≤–ª–µ–Ω–∏—è.

### –¢–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç

#### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –≤ STM32CubeMX

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω —Å –ø–æ–º–æ—â—å—é STM32CubeMX, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –Ω–∞—á–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏.

![–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è STM32CubeMX](./stm32cubemx_clocks.png)

–ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞:

- –¢–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: HSE 8MHz —Å PLL –¥–æ 72MHz
- UART1 –¥–ª—è –≤—ã–≤–æ–¥–∞ –ª–æ–≥–æ–≤
- GPIO PC13 –¥–ª—è LED –∏–Ω–¥–∏–∫–∞—Ü–∏–∏
- –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç–∞–π–º–µ—Ä—ã –¥–ª—è FreeRTOS

![–û–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ FreeRTOS](./stm32cubemx_rtos.png)
> –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è FreeRTOS —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º CMSIS-RTOS2 API

–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ –≤–∞–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

![–û–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞](./stm32cubemx_additional_code_gen.png)
> –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ –≤ –ø—Ä–æ–µ–∫—Ç. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ .c –∏ .h —Ñ–∞–π–ª–æ–≤ –¥–ª—è –ø–µ—Ä–µ—Ñ–µ—Ä–∏–∏.

![–û–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞](./stm32cubemx_project_gen.png)
> –í—ã–±–æ—Ä Makefile –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–∏—Å—Ç–µ–º—ã —Å–±–æ—Ä–∫–∏ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Docker. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫—É—á–∏, —Ç.–∫. –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ø–∞–º—è—Ç—å –≤–æ FreeRTOS. –ü—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è 10 –ø–æ—Ç–æ–∫–æ–≤.

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É STM32CubeMX:

```files
lib/
‚îî‚îÄ‚îÄ # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
test/
‚îî‚îÄ‚îÄ # –¢–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
    ‚îî‚îÄ‚îÄ tests_stm32/
        ‚îú‚îÄ‚îÄ Core/
        ‚îÇ   ‚îú‚îÄ‚îÄ Inc/           # –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã
        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tests.h    # —Ñ–∞–π–ª—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ cubemx
        ‚îÇ   ‚îî‚îÄ‚îÄ Src/           # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
        ‚îÇ       ‚îî‚îÄ‚îÄ ...        # —Ñ–∞–π–ª—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ cubemx
        ‚îú‚îÄ‚îÄ Drivers/           # HAL –∏ CMSIS
        ‚îú‚îÄ‚îÄ Middlewares/       # FreeRTOS
        ‚îî‚îÄ‚îÄ Makefile           # –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
    ‚îî‚îÄ‚îÄ # –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        ‚îú‚îÄ‚îÄ test.sh
        ‚îî‚îÄ‚îÄ compose.yml
```

–ü—Ä–∏ —Å–±–æ—Ä–∫–µ, test.sh –∫–æ–ø–∏—Ä—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É –≤ —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–±–æ—Ä–∫—É. –í Makefile –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ –¥–ª—è —Å–±–æ—Ä–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —Ç–µ—Å—Ç–æ–≤.

#### FreeRTOS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

FreeRTOS –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ STM32CubeMX —Å —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

- –í–∫–ª—é—á–µ–Ω DefaultTask
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
- –£–≤–µ–ª–∏—á–µ–Ω —Ä–∞–∑–º–µ—Ä heap –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ (–ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤ —Ä–∞–∑–¥–µ–ª–µ –æ—Ç–ª–∞–¥–∫–∏)

–í–µ—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–¥ FreeRTOS —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –≤ `freertos.c`:

```c:test/tests_stm32/Core/Src/freertos.c
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞
osThreadId_t defaultTaskHandle;
const osThreadAttr_t defaultTask_attributes = {
  .name = "defaultTask",
  .stack_size = 128 * 4,
  .priority = (osPriority_t) osPriorityNormal,
};

// –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
void StartDefaultTask(void *argument)
{
  logging_init();
  // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
  osDelay(1000);
  // –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
  logging_test();
  // ...
}
```

–≠—Ç–æ—Ç –ø–æ—Ç–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

> üí° **–°–æ–≤–µ—Ç:** STM32CubeMX –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –ø–æ—Å–ª–µ–¥—É—é—â–µ–π —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∫–æ–¥–∞.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–¢–µ—Å—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ [`tests.c`](https://github.com/AleksandrVin/logging_cmsis_rtos2/blob/main/test/tests_stm32/Core/Src/tests.c) –∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ä–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:

```c:test/tests_stm32/Core/Src/tests.c
void logging_test()
{
    logging_basic_test("basic_test");                  // –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
    osDelay(200);                                      // –û–∂–∏–¥–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞ –ª–æ–≥–æ–≤
    logging_test_pack("pack_of_ten_ten_times");       // –ü–∞–∫–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å
    osDelay(200);                                      // –û–∂–∏–¥–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞ –ª–æ–≥–æ–≤
    logging_test_different_levels("different_levels"); // –†–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤
    osDelay(200);                                      // –û–∂–∏–¥–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞ –ª–æ–≥–æ–≤
    logging_test_fatal("fatal");                      // –§–∞—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏
    osDelay(200);                                      // –û–∂–∏–¥–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞ –ª–æ–≥–æ–≤
    logging_interrupt();                              // –õ–æ–≥–∏ –∏–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
    osDelay(200);                                      // –û–∂–∏–¥–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞ –ª–æ–≥–æ–≤
    logging_test_multiple_threads();                  // –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π —Ç–µ—Å—Ç
}
```

> üí° **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ó–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏ (`osDelay`) –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ—Ç–æ–∫—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø—É—Å—Ç–æ—à–∏—Ç—å –±—É—Ñ–µ—Ä—ã –∏ —á–µ—Ç–∫–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –≤—ã–≤–æ–¥ —Ä–∞–∑–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

#### –ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

1. **–ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

    ```text
    [INFO     ][1s.1]: basic_test_0
    [INFO     ][1s.12]: basic_test_1
    [INFO     ][1s.22]: basic_test_2
    ```

    - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
    - –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ —Å –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é
    - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å –ª–æ–≥–æ–≤

    –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–∏–∫–∏ —è–¥—Ä–∞ FreeRTOS –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏. –í—Ä–µ–º—è —Ñ–∏–∫—Å–∏—Ä–∏—É–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –±—É—Ñ–µ—Ä–µ –¥–æ –ø–µ—Ä–µ–¥–∞—á–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —Ç–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç –≤—Ä–µ–º—è –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è, –∞ –Ω–µ –ø–µ—Ä–µ–¥–∞—á–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

2. **–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**

    ```text
    [DEBUG_ALL][2s.112]: different_levels_DEBUG_ALL
    [DEBUG_MIN][2s.112]: different_levels_DEBUG_MIN
    [INFO     ][2s.112]: different_levels_INFO
    [WARNING  ][2s.112]: different_levels_WARNING
    [ERROR    ][2s.112]: different_levels_ERR
    ```

3. **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–∂–∏–º—ã**

    ```text
    # –§–∞—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ (–ø—Ä—è–º–æ–π –≤—ã–≤–æ–¥ –≤ UART)
    fatal_0
    fatal_1

    # –õ–æ–≥–∏ –∏–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π (–±–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏)
    [INFO     ][2s.512]ISR: LOG_ISR_9
    ```

    - `LOG_FATAL` - –ø—Ä—è–º–∞—è –∑–∞–ø–∏—Å—å –≤ UART, –±–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏
    - `LOG_ISR` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π, –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±—É—Ñ–µ—Ä–∞

    ```c:test/tests_stm32/Core/Src/tests.c
    void logging_interrupt()
    {
        // —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –ª–æ–≥ –±—É–¥–µ—Ç –Ω–∞–ø–µ—á–∞—Ç–∞–Ω
        for (int i = 0; i < LOGS_AT_ONCE; i++) {
            LOG_ISR(INFO, "LOG_ISR_%d", i);
        }
    }
    ```

    > ‚ö†Ô∏è **–í–∞–∂–Ω–æ –ø—Ä–æ ISR:** –í –≤—ã–≤–æ–¥–µ –≤–∏–¥–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (`LOG_ISR_9`), –∏ —ç—Ç–æ –æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ. –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è:
    > - –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
    > - –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
    > - –ü–æ—Ç–æ–∫ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–º–µ–µ—Ç –±–æ–ª–µ–µ –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
    > –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ, –ø–æ–∫–∞ –ø–æ—Ç–æ–∫ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ, —Å–ª–µ–¥—É—é—â–∏–π –≤—ã–∑–æ–≤ `LOG_ISR` —É–∂–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ. –≠—Ç–æ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç—ã –≤ ISR –∏ –≥–∞—Ä–∞–Ω—Ç–∏–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

4. **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π —Ç–µ—Å—Ç**

    ```c
    void logging_test_multiple_threads()
    {
        for (int i = 0; i < THREADS_AMOUNT; i++) {
            threads[i] = osThreadNew(logging_thread, names[i], NULL);
        }
    }
    ```

    ```text
    [INFO     ][2s.812]: logging_thread_4_0
    [INFO     ][2s.812]: logging_thread_4_1
    [INFO     ][2s.812]: logging_thread_5_1
    [INFO     ][2s.812]: logging_thread_6_1
    ```

    - 10 –ø–æ—Ç–æ–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–∏—à—É—Ç –ª–æ–≥–∏
    - –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π –±—É—Ñ–µ—Ä –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π
    - –ü–æ—Ç–æ–∫ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–º–µ–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
    - –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ—Ç–æ–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ –±—É—Ñ–µ—Ä–∞

#### –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –≤—ã–≤–æ–¥–∞

–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º [`verify_output.py`](https://github.com/AleksandrVin/logging_cmsis_rtos2/blob/main/test/verify_output.py):

```python
# –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞ INFO —Å–æ–æ–±—â–µ–Ω–∏—è
pattern = r"\[INFO\s*\]\[(\d+)s\.(\d+)\]: basic_test_(\d+)"
match = re.match(pattern, output)
if match:
    seconds = int(match.group(1))
    milliseconds = int(match.group(2))
    test_number = int(match.group(3))
`````

> üí° **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ UART. –ü—Ä–∏ –º–∞–ª–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ª–æ–≥–æ–≤ –æ–Ω–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ. –ü—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏ –±—É—Ñ–µ—Ä–∞ –ø–æ—Ç–æ–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –¥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –º–µ—Å—Ç–∞. –†–µ–∂–∏–º—ã `LOG_FATAL` –∏ `LOG_ISR` –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥.
